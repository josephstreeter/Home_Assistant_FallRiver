# This file contains Home Assistant automation entities.
# Define automations here - rules that automatically trigger actions based on conditions and triggers.
# Automations consist of triggers (what starts the automation), conditions (optional checks), 
# and actions (what the automation does when triggered).
# Use automations to create smart home behaviors like turning lights on at sunset or sending alerts.
#
# Example automation configuration (commented out):
#
# - id: example_automation
#   alias: 'Example: Motion Light'
#   description: Turn on lights when motion is detected
#   trigger:
#     - platform: state
#       entity_id: binary_sensor.motion_living_room
#       from: 'off'
#       to: 'on'
#   condition:
#     - condition: numeric_state
#       entity_id: sensor.living_room_illuminance
#       below: 50
#   action:
#     - service: light.turn_on
#       target:
#         entity_id: light.living_room
#       data:
#         brightness: 255
#   mode: single

- id: test_automation_sample
  alias: 'Test: Sample Automation'
  description: A simple test automation that sends a notification every 30 minutes
  trigger:
    - platform: time_pattern
      minutes: '/30'
  condition: []
  action:
    - service: persistent_notification.create
      data:
        title: "Test Automation"
        message: "This is a test notification sent at {{ now().strftime('%H:%M:%S') }}"
        notification_id: "test_automation"
  mode: single

- id: evening_sunset_lighting
  alias: 'Evening: Sunset Lighting'
  description: Turn on evening lights at sunset with appropriate brightness
  trigger:
    - platform: sun
      event: sunset
      offset: -00:15:00
  condition:
    - condition: state
      entity_id: input_boolean.vacation_mode
      state: 'off'
    - condition: state
      entity_id: input_boolean.auto_lights
      state: 'on'
  action:
    - service: scene.turn_on
      target:
        entity_id: scene.evening_dusk_to_dawn_lighting
    - service: persistent_notification.create
      data:
        message: Evening lights activated at sunset
        title: Home Automation
        notification_id: sunset_lights
  mode: single

- id: morning_sunrise_lights_off
  alias: 'Morning: Sunrise Lights Off'
  description: Turn off evening lights at sunrise
  trigger:
    - platform: sun
      event: sunrise
      offset: 00:30:00
  condition:
    - condition: state
      entity_id: input_boolean.vacation_mode
      state: 'off'
    - condition: state
      entity_id: input_boolean.auto_lights
      state: 'on'
  action:
    - service: scene.turn_off
      target:
        entity_id: scene.evening_dusk_to_dawn_lighting
    - service: persistent_notification.create
      data:
        message: Morning lights turned off at sunrise
        title: Home Automation
        notification_id: sunrise_lights
  mode: single  